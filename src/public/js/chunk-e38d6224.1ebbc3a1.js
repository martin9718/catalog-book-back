(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e38d6224"],{"0f7a":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"mb-8"},[e._v("Agregar libros")]),a("v-row",{staticClass:"d-none d-md-flex"},[a("v-col",{staticClass:"pa-0 pl-5",attrs:{cols:"3"}},[e._v("Título")]),a("v-col",{staticClass:"pa-0 pl-5",attrs:{cols:"3"}},[e._v("No. Páginas")]),a("v-col",{staticClass:"pa-0 pl-5",attrs:{cols:"3"}},[e._v("Fecha de publicación")]),a("v-col",{staticClass:"pa-0 pl-13",attrs:{cols:"3"}},[e._v("Imagen")])],1),e._l(e.books,(function(t,o){return a("v-row",{key:o},[a("v-col",{staticClass:"form__field",attrs:{cols:"12",sm:"6",md:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"book.title"}],attrs:{type:"text",placeholder:"Título",disabled:t.isValid},domProps:{value:t.title},on:{input:function(a){a.target.composing||e.$set(t,"title",a.target.value)}}})]),a("v-col",{staticClass:"form__field",attrs:{cols:"12",sm:"6",md:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.numberPages,expression:"book.numberPages"}],attrs:{type:"text",placeholder:"No. Páginas",disabled:t.isValid},domProps:{value:t.numberPages},on:{input:function(a){a.target.composing||e.$set(t,"numberPages",a.target.value)}}})]),a("v-col",{staticClass:"form__field",attrs:{cols:"12",sm:"6",md:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.publicationDate,expression:"book.publicationDate"}],attrs:{type:"date",max:e.beforeToday(),disabled:t.isValid},domProps:{value:t.publicationDate},on:{input:function(a){a.target.composing||e.$set(t,"publicationDate",a.target.value)}}})]),a("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-file-input",{staticStyle:{"min-width":"200px"},attrs:{accept:"image/png, image/jpeg",outlined:"",dense:"",label:"Imagen",color:"#77c1ff","hide-details":"",disabled:t.isValid},model:{value:t.image,callback:function(a){e.$set(t,"image",a)},expression:"book.image"}}),t.isValid?e._e():a("v-icon",{staticClass:"ml-2 cursor-pointer",attrs:{color:"#1867c0"},on:{click:function(t){return e.validateBook(o)}}},[e._v(" far fa-save ")]),a("v-icon",{staticClass:"ml-2 cursor-pointer",attrs:{color:"primary"},on:{click:function(t){return e.deleteBookLine(o)}}},[e._v(" far fa-times-circle ")])],1),a("span",{staticClass:"alert-error ml-4"},[e._v(e._s(e.errors[o]))])],1)})),a("div",{staticClass:"d-flex justify-space-between align-center mt-5"},[a("v-btn",{attrs:{outlined:"",color:"primary",disabled:e.booksNotValid},on:{click:e.saveBooks}},[e._v(" Guardar ")]),a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"primary",disabled:e.books.length>4},on:{click:e.addBookLine}},[a("v-icon",{attrs:{dark:""}},[e._v(" fas fa-plus ")])],1)],1)],2)},s=[],i=a("1da1"),r=a("5530"),n=(a("96cf"),a("a434"),a("498a"),a("1315")),l=a("bce2"),c=a("2f62"),u={name:"AddBooks",components:{BookInput:l["a"]},data:function(){return{books:[{title:null,numberPages:null,publicationDate:null,image:null,isValid:!1}],errors:[]}},methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])("book",["createBooks"])),{},{addBookLine:function(){this.books.push({title:null,numberPages:null,publicationDate:null,image:null,isValid:!1})},deleteBookLine:function(e){this.books.splice(e,1)},validateBook:function(e){var t,a;return this.errors.splice(e,1),null!==(t=this.books[e].title)&&void 0!==t&&t.trim()?null===(a=this.books[e].numberPages)||void 0===a||!a.trim()||isNaN(this.books[e].numberPages)?this.errors[e]="Ingrese un número válido de páginas":this.books[e].numberPages<50||this.books[e].numberPages>500?this.errors[e]="El número de páginas debe estar entre 50 y 500 páginas":this.books[e].publicationDate?this.isDateBeforeToday(this.books[e].publicationDate)?this.books[e].image?"image/png"!==this.books[e].image.type&&"image/jpeg"!==this.books[e].image.type?this.errors[e]="La imagen tiene que estar en formato png o jpeg":(this.books[e].userId=this.getUser.id,void(this.books[e].isValid=!0)):this.errors[e]="La imagen es requerida":this.errors[e]="La fecha de publicación debe ser anterior a hoy":this.errors[e]="La fecha de publicación es requerida":this.errors[e]="El título es requerido"},saveBooks:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.createBooks(e.books);case 2:if(a=t.sent,!a){t.next=6;break}return t.next=6,e.$router.push({name:"BookList"});case 6:case"end":return t.stop()}}),t)})))()},isDateBeforeToday:function(e){var t=n["DateTime"].now(),a=n["DateTime"].fromISO(e);return a<t},beforeToday:function(){return n["DateTime"].now().plus({day:-1}).toFormat("yyyy-MM-dd")}}),computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])("auth",["getUser"])),{},{booksNotValid:function(){if(0===this.books.length)return!0;for(var e in this.books)if(!this.books[e].isValid)return!0;return!1}})},d=u,m=(a("783a"),a("2877")),b=Object(m["a"])(d,o,s,!1,null,"da5fb6be",null);t["default"]=b.exports},"672d":function(e,t,a){},"783a":function(e,t,a){"use strict";a("672d")},a434:function(e,t,a){"use strict";var o=a("23e7"),s=a("da84"),i=a("23cb"),r=a("5926"),n=a("07fa"),l=a("7b0b"),c=a("65f0"),u=a("8418"),d=a("1dde"),m=d("splice"),b=s.TypeError,p=Math.max,f=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var a,o,s,d,m,h,k=l(this),y=n(k),_=i(e,y),w=arguments.length;if(0===w?a=o=0:1===w?(a=0,o=y-_):(a=w-2,o=f(p(r(t),0),y-_)),y+a-o>v)throw b(g);for(s=c(k,o),d=0;d<o;d++)m=_+d,m in k&&u(s,d,k[m]);if(s.length=o,a<o){for(d=_;d<y-o;d++)m=d+o,h=d+a,m in k?k[h]=k[m]:delete k[h];for(d=y;d>y-o+a;d--)delete k[d-1]}else if(a>o)for(d=y-o;d>_;d--)m=d+o-1,h=d+a-1,m in k?k[h]=k[m]:delete k[h];for(d=0;d<a;d++)k[d+_]=arguments[d+2];return k.length=y-o+a,s}})}}]);
//# sourceMappingURL=chunk-e38d6224.1ebbc3a1.js.map