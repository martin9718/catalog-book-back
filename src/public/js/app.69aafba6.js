(function(e){function t(t){for(var r,a,c=t[0],i=t[1],s=t[2],d=0,p=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(p.length)p.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},u=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2c834a36":"f0a6d5e3","chunk-2d0b2d29":"8c360d4f","chunk-2f8bc2fb":"bc829a63","chunk-4fe5f728":"fd40bdaa","chunk-e38d6224":"1ebbc3a1","chunk-546c4144":"f6391e9f","chunk-6a329167":"c30a7c55"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-2c834a36":1,"chunk-2f8bc2fb":1,"chunk-4fe5f728":1,"chunk-e38d6224":1,"chunk-546c4144":1,"chunk-6a329167":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2c834a36":"1200917b","chunk-2d0b2d29":"31d6cfe0","chunk-2f8bc2fb":"60673692","chunk-4fe5f728":"9e9b34e2","chunk-e38d6224":"0a31e4dc","chunk-546c4144":"5df62891","chunk-6a329167":"60673692"}[e]+".css",o=i.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){s=p[c],d=s.getAttribute("data-href");if(d===r||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],f.parentNode.removeChild(f),n(u)},f.href=o;var l=document.getElementsByTagName("head")[0];l.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e);var p=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var p=0;p<s.length;p++)t(s[p]);var f=d;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppLayout",[n("router-view")],1)},o=[],u=n("dead"),c={name:"App",components:{AppLayout:u["default"]},data:function(){return{}}},i=c,s=n("2877"),d=Object(s["a"])(i,a,o,!1,null,null,null),p=d.exports,f=n("1da1"),l=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),h=(n("e9c4"),n("caad"),n("2f62")),m=n("0e44"),b=n("88b4"),k=n.n(b),g=(n("b0c0"),function(e){r["default"].swal.fire({text:e,icon:"error",confirmButtonColor:"#ff5a60",confirmButtonText:"Cerrar"})}),v=function(e){var t="",n=!1;switch(e){case"BAD_REQUEST":t="El email o la contraseña son incorrectos.";break;case"UNEXPECTED_ERROR":t="Ocurrio un error inesperado al iniciar sesión, inténtelo más tarde.";break;default:t="Ocurrio un error inesperado al iniciar sesión, inténtelo más tarde.";break}g(t,n)},w=function(e){var t="",n=!1;switch(e){case"BAD_REQUEST":t="La información de los libros es requerida";break;case"IMAGE_EXCEEDS_SIZE":t="El tamaño maximo de las imagenes es de 1000px de ancho y 1000px de alto.";break;default:t="Ocurrio un error inesperado al guardar los libros, inténtelo más tarde.";break}g(t,n)},y={namespaced:!0,state:{user:null,token:""},mutations:{setUser:function(e,t){e.user=t},setToken:function(e,t){e.token=t}},actions:{setUser:function(e,t){var n=e.commit;n("setUser",t)},setToken:function(e,t){var n=e.commit;n("setToken",t)},login:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,n.next=3,P.dispatch("requestFetch",{path:"/auth/signIn",method:"POST",data:{email:t.email,password:t.password},authentication:!1});case 3:if(r=n.sent,!r.code){n.next=7;break}return v(r.code),n.abrupt("return",!1);case 7:return a=r.id,o=r.name,u=r.email,c=r.token,n.next=10,P.dispatch("auth/setToken","Bearer "+c);case 10:return n.next=12,P.dispatch("auth/setUser",{id:a,name:o,email:u});case 12:return n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n)})))()},loginOut:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.next=3,P.dispatch("requestFetch",{path:"/auth/signOut",method:"POST",data:{},authentication:!0});case 3:if(n=t.sent,!n.code){t.next=7;break}return v(n.code),t.abrupt("return",!1);case 7:return t.next=9,P.dispatch("auth/setToken","");case 9:return t.next=11,P.dispatch("auth/setUser",null);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})))()},currentUser:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.next=3,P.dispatch("requestFetch",{path:"/users/currentUser",method:"GET",data:{},authentication:!0});case 3:return n=t.sent,r=n.id,a=n.name,o=n.email,u=n.token,t.next=7,P.dispatch("auth/setToken","Bearer "+u);case 7:return t.next=9,P.dispatch("auth/setUser",{id:r,name:a,email:o});case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))()}},getters:{getUser:function(e){return e.user},getToken:function(e){return e.token}}},x=(n("159b"),n("99af"),"https://catalog-book.herokuapp.com/api"),E=[401,403],O={namespaced:!0,state:{numberBooks:0},mutations:{setNumberBooks:function(e,t){e.numberBooks=t}},actions:{setNumberBooks:function(e,t){var n=e.commit;n("setNumberBooks",t)},createBooks:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,n.prev=1,r=new FormData,t.forEach((function(e,t){r.append("book-file-"+t,e.image,e.image.name)})),r.append("books",JSON.stringify(t)),a=new Headers,a.append("Authorization",P.getters["auth/getToken"]),o={method:"POST",headers:a,body:r,redirect:"follow"},n.next=10,fetch("".concat(x,"/books/"),o);case 10:if(u=n.sent,!E.includes(u.status)){n.next=17;break}return n.next=14,P.dispatch("auth/setToken","");case 14:return n.next=16,P.dispatch("auth/setUser",null);case 16:return n.abrupt("return",L.push({name:"Login"}));case 17:return n.next=19,u.json();case 19:if(c=n.sent,!c.code){n.next=23;break}return w(c.code),n.abrupt("return",!1);case 23:return n.abrupt("return",!0);case 26:return n.prev=26,n.t0=n["catch"](1),w("UNEXPECTED_ERROR"),n.abrupt("return",!1);case 30:case"end":return n.stop()}}),n,null,[[1,26]])})))()},findBooks:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,r=t.userId,a=t.limit,o=t.page,n.next=4,P.dispatch("requestFetch",{path:"/books/".concat(r,"?limit=").concat(a,"&page=").concat(o),method:"GET",authentication:!0});case 4:if(u=n.sent,!u.code){n.next=8;break}return v(u.code),n.abrupt("return",!1);case 8:return n.abrupt("return",u);case 9:case"end":return n.stop()}}),n)})))()},getBook:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,n.next=3,P.dispatch("requestFetch",{path:"/books/book/".concat(t),method:"GET",authentication:!0});case 3:if(r=n.sent,!r.code){n.next=7;break}return v(r.code),n.abrupt("return",!1);case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}}),n)})))()},updateBook:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o,u,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,n.prev=1,r=new FormData,a={title:t.title,numberPages:t.numberPages,publicationDate:t.publicationDate},r.append("book",t.image,t.image.name),r.append("book",JSON.stringify(a)),o=new Headers,o.append("Authorization",P.getters["auth/getToken"]),u={method:"POST",headers:o,body:r,redirect:"follow"},n.next=11,fetch("".concat(x,"/books/book/").concat(t.id),u);case 11:if(c=n.sent,!E.includes(c.status)){n.next=18;break}return n.next=15,P.dispatch("auth/setToken","");case 15:return n.next=17,P.dispatch("auth/setUser",null);case 17:return n.abrupt("return",L.push({name:"Login"}));case 18:return n.next=20,c.json();case 20:if(i=n.sent,!i.code){n.next=24;break}return w(i.code),n.abrupt("return",!1);case 24:return n.abrupt("return",!0);case 27:return n.prev=27,n.t0=n["catch"](1),w("UNEXPECTED_ERROR"),n.abrupt("return",!1);case 31:case"end":return n.stop()}}),n,null,[[1,27]])})))()},deleteBook:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,n.next=3,P.dispatch("requestFetch",{path:"/books/delete/".concat(t),method:"POST",authentication:!0});case 3:if(r=n.sent,!r.code){n.next=7;break}return v(r.code),n.abrupt("return",!1);case 7:return n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()}},getters:{getNumberBooks:function(e){return e.numberBooks}}},T=new k.a({isCompression:!1});r["default"].use(h["a"]);var R="https://catalog-book.herokuapp.com/api",j=[401,403],P=new h["a"].Store({plugins:[Object(m["a"])({storage:{getItem:function(e){return T.get(e)},setItem:function(e,t){return T.set(e,t)},removeItem:function(e){return T.remove(e)}}})],mutations:{},actions:{requestFetch:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o,u,c,i,s,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,r=t.path,a=t.method,o=t.data,u=t.authentication,c=void 0===u||u,n.prev=2,i=new Headers,c&&i.append("Authorization",P.getters["auth/getToken"]),i.append("Content-Type","application/json"),s={method:a,headers:i,body:JSON.stringify(o),redirect:"follow"},n.next=9,fetch("".concat(R).concat(r),s);case 9:if(d=n.sent,!j.includes(d.status)){n.next=16;break}return n.next=13,P.dispatch("auth/setToken","");case 13:return n.next=15,P.dispatch("auth/setUser",null);case 15:return n.abrupt("return",L.push({name:"Login"}));case 16:return n.next=18,d.json();case 18:return n.abrupt("return",n.sent);case 21:return n.prev=21,n.t0=n["catch"](2),n.abrupt("return",{code:"UNEXPECTED_ERROR"});case 24:case"end":return n.stop()}}),n,null,[[2,21]])})))()}},modules:{auth:y,book:O},getters:{}});r["default"].use(l["a"]);var B=[{path:"/",redirect:"/book-list"},{path:"/login",name:"Login",component:function(){return n.e("chunk-2c834a36").then(n.bind(null,"5326"))},meta:{layout:"MainLayout"}},{path:"/book-list",name:"BookList",component:function(){return n.e("chunk-6a329167").then(n.bind(null,"c49f"))},meta:{layout:"MainLayout"}},{path:"/add-books",name:"AddBooks",component:function(){return Promise.all([n.e("chunk-2f8bc2fb"),n.e("chunk-e38d6224")]).then(n.bind(null,"0f7a"))},meta:{layout:"MainLayout"}},{path:"/edt-book/:bookId",name:"EditBook",component:function(){return Promise.all([n.e("chunk-2f8bc2fb"),n.e("chunk-4fe5f728")]).then(n.bind(null,"9649"))},meta:{layout:"MainLayout"}}],_=new l["a"]({mode:"history",base:"/",routes:B});_.beforeEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"/login"===t.path&&""!==P.getters["auth/getToken"]?r("/"):r(),"/book-list"===t.path&&""===P.getters["auth/getToken"]?r("/login"):r();case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var L=_,S=n("ce5b"),A=n.n(S);n("bf40");r["default"].use(A.a);var U=new A.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#ff5a60",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},icons:{iconfont:"fa"}}),C=(n("e792"),n("d5e8"),n("15f5"),n("034b"),n("f9d5")),F=n.n(C);n("4413");r["default"].use(F.a),r["default"].config.productionTip=!1,new r["default"]({router:L,store:P,vuetify:U,render:function(e){return e(p)}}).$mount("#app")},a449:function(e,t,n){var r={"./AppLayout.vue":["dead"],"./AppLayoutDefault.vue":["266e","chunk-2d0b2d29"],"./MainLayout.vue":["713b","chunk-546c4144"]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="a449",e.exports=a},dead:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.layout,{tag:"component"},[e._t("default")],2)},a=[],o=(n("d3b7"),n("3ca3"),n("ddb0"),"AppLayoutDefault"),u={name:"ApppLayout",computed:{layout:function(){var e=this.$route.meta.layout||o;return function(){return n("a449")("./".concat(e,".vue"))}}}},c=u,i=n("2877"),s=Object(i["a"])(c,r,a,!1,null,null,null);t["default"]=s.exports}});
//# sourceMappingURL=app.69aafba6.js.map